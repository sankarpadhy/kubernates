<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Kubernetes Learning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        .component {
            cursor: pointer;
            transition: transform 0.3s;
            padding: 15px;
            margin: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .component:hover {
            transform: scale(1.05);
        }
        .control-plane {
            background-color: #e3f2fd;
        }
        .worker-node {
            background-color: #f5f5f5;
        }
        .details-panel {
            padding: 20px;
            border-radius: 8px;
            background-color: #ffffff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        .animation-container {
            position: relative;
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin: 20px 0;
            overflow: hidden;
        }
        .pod {
            position: absolute;
            width: 60px;
            height: 60px;
            background-color: #bbdefb;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.5s ease;
        }
        .interactive-terminal {
            background-color: #1e1e1e;
            color: #ffffff;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            margin: 20px 0;
        }
        .command-input {
            background-color: transparent;
            border: none;
            color: #ffffff;
            width: 100%;
            outline: none;
        }
        .architecture-container {
            min-height: 1000px;
            padding: 20px;
        }
        .mermaid {
            min-height: 800px;
        }
        .exercise-step {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            background-color: #f8f9fa;
        }
        .command-line {
            color: #fff;
            margin: 5px 0;
        }
        .command-response {
            color: #98c379;
            margin: 5px 0;
            white-space: pre;
            font-family: monospace;
        }
        .command-error {
            color: #e06c75;
            margin: 5px 0;
        }
        .code-examples {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
        .code-examples code {
            display: block;
            margin: 5px 0;
            padding: 5px;
            background-color: #e9ecef;
            border-radius: 3px;
        }
        .code-examples code:hover {
            background-color: #dee2e6;
            cursor: pointer;
        }
        .command-category {
            margin: 10px 0;
            padding: 5px;
            border-bottom: 1px solid #dee2e6;
            color: #495057;
            font-weight: bold;
        }
        .terminal-output {
            background-color: #1e1e1e;
            padding: 10px;
            border-radius: 4px;
        }
        .card {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-outline-primary {
            margin: 5px;
        }
        .card {
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 1rem;
        }
        .terminal-output {
            background-color: #1e1e1e;
            padding: 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .command-input {
            background-color: #1e1e1e !important;
            color: #fff !important;
            font-size: 0.9rem;
        }
        .command-input::placeholder {
            color: #6c757d;
        }
        .exercise-step {
            background-color: #f8f9fa;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 4px solid #007bff;
        }
        .mermaid {
            min-height: 400px;
        }
        .code-examples {
            max-height: 300px;
            overflow-y: auto;
        }
        .command-category {
            color: #6c757d;
            font-weight: bold;
            margin-top: 10px;
            padding: 5px 0;
            border-bottom: 2px solid #dee2e6;
        }
        .command-response {
            color: #98c379;
            white-space: pre-wrap;
            margin: 5px 0;
        }
        .command-line {
            color: #fff;
            margin: 5px 0;
            padding: 2px 0;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">Kubernetes Interactive Learning</a>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Main Column - Kubernetes Architecture -->
            <div class="col-12">
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">Kubernetes Architecture</h4>
                    </div>
                    <div class="card-body">
                        <div class="mermaid">
                            graph TB
                            subgraph Kubernetes Cluster
                                subgraph Control Plane
                                    API[API Server]
                                    ETCD[etcd]
                                    CM[Controller Manager]
                                    SCHED[Scheduler]
                                end
                                
                                subgraph Worker Node 1
                                    KL1[Kubelet]
                                    KP1[Kube Proxy]
                                    CR1[Container Runtime]
                                end
                                
                                subgraph Worker Node 2
                                    KL2[Kubelet]
                                    KP2[Kube Proxy]
                                    CR2[Container Runtime]
                                end
                                
                                API --> KL1
                                API --> KL2
                                KL1 --> CR1
                                KL2 --> CR2
                                API --> ETCD
                                CM --> API
                                SCHED --> API
                            end
                        </div>
                        
                        <!-- Component Details Panel -->
                        <div id="detailsPanel" class="mt-4 p-3 border rounded bg-light">
                            <!-- Component details will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Interactive Section Row -->
        <div class="row">
            <!-- Interactive Exercises -->
            <div class="col-lg-6">
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">Interactive Exercises</h4>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-primary" onclick="startExercise('pods')">Pod Lifecycle</button>
                            <button class="btn btn-primary" onclick="startExercise('services')">Service Networking</button>
                            <button class="btn btn-primary" onclick="startExercise('deployment')">Deployment Strategy</button>
                        </div>
                        <div id="exerciseOutput" class="mt-3">
                            <!-- Exercise output will appear here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kubernetes Terminal -->
            <div class="col-lg-6">
                <div class="card mb-4">
                    <div class="card-header bg-dark text-white">
                        <h4 class="mb-0">Kubernetes Terminal</h4>
                    </div>
                    <div class="card-body bg-dark">
                        <div id="commandOutput" class="terminal-output mb-3" style="height: 300px; overflow-y: auto; color: #fff; font-family: monospace;">
                            <!-- Command output will appear here -->
                        </div>
                        <div class="input-group">
                            <span class="input-group-text bg-dark text-white border-0">$</span>
                            <input type="text" class="form-control bg-dark text-white border-0 command-input" 
                                   placeholder="Type kubectl command..." 
                                   onkeypress="handleCommand(event)"
                                   style="font-family: monospace;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Component Explorer Row -->
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">Component Explorer</h4>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-wrap gap-2 justify-content-center">
                            <button class="btn btn-outline-primary" onclick="showDetails('apiserver')">API Server</button>
                            <button class="btn btn-outline-primary" onclick="showDetails('etcd')">etcd</button>
                            <button class="btn btn-outline-primary" onclick="showDetails('kubelet')">Kubelet</button>
                            <button class="btn btn-outline-primary" onclick="showDetails('kubeproxy')">Kube Proxy</button>
                            <button class="btn btn-outline-primary" onclick="showDetails('scheduler')">Scheduler</button>
                            <button class="btn btn-outline-primary" onclick="showDetails('controllermanager')">Controller Manager</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ startOnLoad: true, theme: 'default' });

        // Exercise simulations with detailed steps and explanations
        const exercises = {
            pods: {
                title: 'Pod Lifecycle Visualization',
                steps: [
                    { 
                        action: 'Creating Pod Manifest',
                        detail: 'kubectl create -f pod.yaml',
                        explanation: 'API Server receives the pod creation request',
                        delay: 1000 
                    },
                    { 
                        action: 'Validating Pod Specification',
                        detail: 'API Server validates the pod configuration',
                        explanation: 'Checking resource requirements, security contexts, and namespace quotas',
                        delay: 1500 
                    },
                    { 
                        action: 'Scheduling Pod',
                        detail: 'Scheduler selects optimal node',
                        explanation: 'Evaluating node resources, taints/tolerations, and affinity rules',
                        delay: 2000 
                    },
                    { 
                        action: 'Kubelet Creating Containers',
                        detail: 'Pulling images and creating containers',
                        explanation: 'Container runtime downloads images and starts containers in order',
                        delay: 2500 
                    },
                    { 
                        action: 'Pod Running',
                        detail: 'Pod is now in Running state',
                        explanation: 'All containers are running and health checks are passing',
                        delay: 2000 
                    }
                ],
                diagram: `
                    sequenceDiagram
                        participant U as User/kubectl
                        participant A as API Server
                        participant S as Scheduler
                        participant K as Kubelet
                        participant C as Container Runtime
                        
                        U->>A: Create Pod
                        A->>A: Validate
                        A->>S: Schedule Pod
                        S->>A: Node Selected
                        A->>K: Create Pod
                        K->>C: Create Container
                        C->>K: Container Running
                        K->>A: Pod Running
                `
            },
            services: {
                title: 'Service Networking Exercise',
                steps: [
                    { 
                        action: 'Creating Service',
                        detail: 'kubectl create service',
                        explanation: 'Creating a new service to expose pods',
                        delay: 1000 
                    },
                    { 
                        action: 'Configuring Endpoints',
                        detail: 'Service selecting pod endpoints',
                        explanation: 'Matching pods based on label selectors',
                        delay: 1500 
                    },
                    { 
                        action: 'Setting up Load Balancer',
                        detail: 'Configuring network rules',
                        explanation: 'kube-proxy updating iptables rules',
                        delay: 2000 
                    },
                    { 
                        action: 'Service Active',
                        detail: 'Service is now routing traffic',
                        explanation: 'Traffic is being distributed to pods',
                        delay: 2000 
                    }
                ]
            },
            deployment: {
                title: 'Deployment Strategy Exercise',
                steps: [
                    { 
                        action: 'Creating Deployment',
                        detail: 'kubectl create deployment',
                        explanation: 'Setting up the deployment controller',
                        delay: 1000 
                    },
                    { 
                        action: 'Scaling Replicas',
                        detail: 'Creating ReplicaSets',
                        explanation: 'Ensuring desired number of pods',
                        delay: 1500 
                    },
                    { 
                        action: 'Rolling Update',
                        detail: 'Updating pod templates',
                        explanation: 'Gradually replacing old pods with new ones',
                        delay: 2000 
                    },
                    { 
                        action: 'Deployment Complete',
                        detail: 'New version deployed',
                        explanation: 'All pods running latest version',
                        delay: 2000 
                    }
                ]
            }
        };

        // Function to simulate exercises with detailed visualization
        function startExercise(type) {
            const exercise = exercises[type];
            if (!exercise) return;

            // Create or get the exercise output container
            const container = document.getElementById('exerciseOutput');
            container.innerHTML = `
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">${exercise.title}</h5>
                    </div>
                    <div class="card-body">
                        <div class="progress mb-3" style="height: 20px;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                 role="progressbar" style="width: 0%">
                            </div>
                        </div>
                        <div id="exerciseSteps"></div>
                        ${exercise.diagram ? `
                            <div class="mt-3">
                                <h6>Sequence Diagram:</h6>
                                <div class="mermaid">
                                    ${exercise.diagram}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;

            // Initialize Mermaid for the new diagram
            if (exercise.diagram) {
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
            }

            const stepsDiv = document.getElementById('exerciseSteps');
            const progressBar = container.querySelector('.progress-bar');
            let currentStep = 0;

            function runStep() {
                if (currentStep < exercise.steps.length) {
                    const step = exercise.steps[currentStep];
                    const stepElement = document.createElement('div');
                    stepElement.className = 'exercise-step mb-3';
                    stepElement.innerHTML = `
                        <div class="d-flex align-items-center">
                            <div class="spinner-border spinner-border-sm me-2"></div>
                            <div>
                                <strong>${step.action}</strong>
                                <div class="text-muted small">${step.detail}</div>
                                <div class="text-info small">${step.explanation}</div>
                            </div>
                        </div>
                    `;
                    stepsDiv.appendChild(stepElement);

                    // Update progress bar
                    const progress = ((currentStep + 1) / exercise.steps.length) * 100;
                    progressBar.style.width = `${progress}%`;

                    setTimeout(() => {
                        stepElement.innerHTML = `
                            <div class="d-flex align-items-center">
                                <i class="fas fa-check-circle text-success me-2"></i>
                                <div>
                                    <strong>${step.action}</strong>
                                    <div class="text-muted small">${step.detail}</div>
                                    <div class="text-info small">${step.explanation}</div>
                                </div>
                            </div>
                        `;
                        currentStep++;
                        runStep();
                    }, step.delay);
                }
            }

            runStep();
        }

        // Component details for the info panel with comprehensive command lists
        const componentDetails = {
            apiserver: {
                title: 'API Server',
                description: 'The Kubernetes API server validates and configures data for the api objects which include pods, services, replicationcontrollers, and others.',
                examples: [
                    // Resource Management
                    '# Resource Management',
                    'kubectl get pods [-n namespace] [-o wide/yaml/json]',
                    'kubectl get services [-n namespace]',
                    'kubectl get deployments [-n namespace]',
                    'kubectl get all [-n namespace]',
                    'kubectl get nodes [-o wide]',
                    
                    // Create & Update
                    '# Create & Update Resources',
                    'kubectl create -f [filename.yaml]',
                    'kubectl apply -f [filename.yaml]',
                    'kubectl edit [resource] [name]',
                    'kubectl patch [resource] [name] -p \'{"spec": {"replicas": 3}}\'',
                    
                    // Delete Resources
                    '# Delete Resources',
                    'kubectl delete pod [pod-name]',
                    'kubectl delete -f [filename.yaml]',
                    'kubectl delete [resource] --all',
                    
                    // Describe & Explain
                    '# Resource Information',
                    'kubectl describe pod [pod-name]',
                    'kubectl explain pods',
                    'kubectl explain pods.spec',
                    
                    // Logs & Debugging
                    '# Logs & Debugging',
                    'kubectl logs [pod-name]',
                    'kubectl logs -f [pod-name]',
                    'kubectl exec -it [pod-name] -- /bin/bash',
                    
                    // Scaling & Rolling Updates
                    '# Scaling & Updates',
                    'kubectl scale deployment [name] --replicas=3',
                    'kubectl rollout status deployment [name]',
                    'kubectl rollout history deployment [name]',
                    'kubectl rollout undo deployment [name]'
                ]
            },
            etcd: {
                title: 'etcd',
                description: 'etcd is a consistent and highly-available key-value store used as Kubernetes\' backing store for all cluster data.',
                examples: [
                    // Basic Operations
                    '# Basic Operations',
                    'etcdctl get / --prefix --keys-only',
                    'etcdctl put /key value',
                    'etcdctl get /key',
                    'etcdctl del /key',
                    
                    // Cluster Management
                    '# Cluster Management',
                    'etcdctl member list',
                    'etcdctl endpoint health',
                    'etcdctl endpoint status',
                    'etcdctl cluster-health',
                    
                    // Backup & Restore
                    '# Backup & Restore',
                    'etcdctl snapshot save snapshot.db',
                    'etcdctl snapshot restore snapshot.db',
                    'etcdctl snapshot status snapshot.db',
                    
                    // Watch & Monitoring
                    '# Watch & Monitoring',
                    'etcdctl watch --prefix /key',
                    'etcdctl watch --rev=0 /key',
                    
                    // Authentication & Security
                    '# Security',
                    'etcdctl user add root',
                    'etcdctl auth enable',
                    'etcdctl role add role1',
                    'etcdctl role grant-permission role1 read /key',
                    
                    // Maintenance
                    '# Maintenance',
                    'etcdctl defrag',
                    'etcdctl compact',
                    'etcdctl alarm list',
                    'etcdctl endpoint health --cluster'
                ]
            },
            kubelet: {
                title: 'Kubelet',
                description: 'The kubelet is the primary "node agent" that runs on each node and ensures containers are running in a Pod.',
                examples: [
                    // Configuration
                    '# Configuration',
                    'kubelet --config=/var/lib/kubelet/config.yaml',
                    'kubelet --kubeconfig=/etc/kubernetes/kubelet.conf',
                    'kubelet --pod-manifest-path=/etc/kubernetes/manifests',
                    
                    // Status & Monitoring
                    '# Status & Monitoring',
                    'systemctl status kubelet',
                    'journalctl -u kubelet',
                    'journalctl -u kubelet -f',
                    'kubelet --version',
                    
                    // Debug & Logs
                    '# Debugging',
                    'kubelet --v=4',
                    'tail -f /var/log/kubelet.log',
                    'crictl ps',
                    'crictl pods',
                    
                    // Resource Management
                    '# Resource Management',
                    'kubelet --max-pods=110',
                    'kubelet --kube-reserved=cpu=1000m,memory=1Gi',
                    'kubelet --system-reserved=cpu=500m,memory=500Mi',
                    
                    // Certificate Management
                    '# Certificates',
                    'kubelet --tls-cert-file=/path/to/cert',
                    'kubelet --tls-private-key-file=/path/to/key',
                    'kubelet --rotate-certificates',
                    
                    // Health Checks
                    '# Health Checks',
                    'curl -k https://localhost:10250/healthz',
                    'curl -k https://localhost:10250/metrics'
                ]
            },
            kubeproxy: {
                title: 'Kube Proxy',
                description: 'Kube-proxy maintains network rules on nodes. These network rules allow network communication to your Pods from network sessions inside or outside of your cluster.',
                examples: [
                    // Configuration
                    '# Configuration',
                    'kube-proxy --config=/var/lib/kube-proxy/config.conf',
                    'kube-proxy --proxy-mode=iptables',
                    'kube-proxy --proxy-mode=ipvs',
                    
                    // Network Rules
                    '# Network Rules',
                    'iptables -t nat -L',
                    'iptables -t nat -L KUBE-SERVICES',
                    'ipvsadm -ln',
                    'ipvsadm -Ln -t',
                    
                    // Monitoring
                    '# Monitoring',
                    'systemctl status kube-proxy',
                    'journalctl -u kube-proxy',
                    'kube-proxy --metrics-bind-address=0.0.0.0:10249',
                    
                    // Debug & Logs
                    '# Debugging',
                    'kube-proxy --v=4',
                    'tail -f /var/log/kube-proxy.log',
                    'conntrack -L',
                    'netstat -nlp | grep kube-proxy',
                    
                    // Service Discovery
                    '# Service Discovery',
                    'kubectl get endpoints',
                    'kubectl describe endpoints [service-name]',
                    'kubectl get services -o wide'
                ]
            },
            scheduler: {
                title: 'Scheduler',
                description: 'The Kubernetes scheduler is a control plane component that assigns Pods to Nodes. The scheduler determines which Nodes are valid placements for each Pod based on constraints and available resources.',
                examples: [
                    // Basic Operations
                    '# Basic Operations',
                    'kubectl get events | grep Scheduled',
                    'kubectl describe pod [pod-name] | grep Node:',
                    'kubectl get pods -o wide',
                    
                    // Node Management
                    '# Node Management',
                    'kubectl cordon [node-name]',
                    'kubectl uncordon [node-name]',
                    'kubectl drain [node-name]',
                    
                    // Pod Scheduling
                    '# Pod Scheduling',
                    'kubectl label node [node-name] disktype=ssd',
                    'kubectl taint nodes [node-name] key=value:NoSchedule',
                    'kubectl get pods --field-selector spec.nodeName=[node-name]',
                    
                    // Configuration
                    '# Configuration',
                    'kube-scheduler --config=/etc/kubernetes/scheduler.conf',
                    'kube-scheduler --leader-elect=true',
                    'kube-scheduler --profiling',
                    
                    // Monitoring
                    '# Monitoring',
                    'kubectl top nodes',
                    'kubectl describe nodes | grep Allocated',
                    'kubectl get events --field-selector reason=Scheduled',
                    
                    // Advanced Scheduling
                    '# Advanced Scheduling',
                    'kubectl explain pod.spec.affinity',
                    'kubectl explain pod.spec.tolerations',
                    'kubectl explain pod.spec.nodeSelector'
                ]
            },
            controllermanager: {
                title: 'Controller Manager',
                description: 'The Kubernetes controller manager is a daemon that embeds the core control loops shipped with Kubernetes. It watches the state of the cluster through the API server and makes changes to move the current state towards the desired state.',
                examples: [
                    // Resource Controllers
                    '# Resource Controllers',
                    'kubectl get deployments',
                    'kubectl get replicasets',
                    'kubectl get daemonsets',
                    'kubectl get statefulsets',
                    'kubectl get jobs',
                    'kubectl get cronjobs',
                    
                    // Node Management
                    '# Node Management',
                    'kubectl get nodes',
                    'kubectl describe node [node-name]',
                    'kubectl get componentstatuses',
                    
                    // Configuration
                    '# Configuration',
                    'kube-controller-manager --leader-elect=true',
                    'kube-controller-manager --controllers=*,bootstrapsigner,tokencleaner',
                    'kube-controller-manager --cluster-cidr=10.244.0.0/16',
                    
                    // Monitoring
                    '# Monitoring',
                    'kubectl describe deployments',
                    'kubectl rollout status deployment [name]',
                    'kubectl get events --field-selector reason=ScalingReplicaSet',
                    
                    // Service Accounts
                    '# Service Accounts',
                    'kubectl get serviceaccounts',
                    'kubectl create serviceaccount [name]',
                    'kubectl get secrets',
                    
                    // Debugging
                    '# Debugging',
                    'kubectl logs deployment/[name]',
                    'kubectl describe replicaset [name]',
                    'kubectl get pods --selector=app=[label]'
                ]
            }
        };

        // Function to show component details with categorized commands
        function showDetails(component) {
            const details = componentDetails[component];
            if (!details) return;

            const detailsPanel = document.getElementById('detailsPanel');
            let commandsHtml = '';
            let currentCategory = '';

            details.examples.forEach(example => {
                if (example.startsWith('#')) {
                    // This is a category header
                    currentCategory = example.substring(2);
                    commandsHtml += `<div class="command-category">${currentCategory}</div>`;
                } else {
                    // This is a command
                    commandsHtml += `<code title="Click to copy" onclick="copyCommand(this)">${example}</code>`;
                }
            });

            detailsPanel.innerHTML = `
                <h3>${details.title}</h3>
                <p>${details.description}</p>
                <h5>Available Commands:</h5>
                <div class="code-examples">
                    ${commandsHtml}
                </div>
            `;
        }

        // Function to copy command to clipboard and populate terminal
        function copyCommand(element) {
            const text = element.textContent;
            const commandInput = document.querySelector('.command-input');
            
            // Copy to clipboard
            navigator.clipboard.writeText(text).then(() => {
                // Visual feedback
                const originalBackground = element.style.backgroundColor;
                element.style.backgroundColor = '#28a745';
                element.style.color = 'white';
                setTimeout(() => {
                    element.style.backgroundColor = originalBackground;
                    element.style.color = '';
                }, 500);
            });

            // Populate terminal input and simulate execution
            if (commandInput) {
                commandInput.value = text;
                simulateCommand(text);
            }
        }

        // Function to simulate command execution
        function simulateCommand(command) {
            const output = document.getElementById('commandOutput');
            output.innerHTML += `<div class="command-line">> ${command}</div>`;
            
            setTimeout(() => {
                let response = '';
                
                // Simulate different command responses
                if (command.includes('get pods')) {
                    response = `NAME                     READY   STATUS    RESTARTS   AGE
nginx-pod               1/1     Running   0          2m
web-deployment-1234    2/2     Running   0          5m
redis-master-1         1/1     Running   0          10m`;
                } else if (command.includes('get services')) {
                    response = `NAME         TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)   AGE
kubernetes   ClusterIP   10.96.0.1       <none>        443/TCP   1h
nginx        NodePort    10.96.123.456   <none>        80/TCP    5m
redis        ClusterIP   10.96.234.567   <none>        6379/TCP  10m`;
                } else if (command.includes('describe')) {
                    response = `Name:         nginx-pod
Namespace:    default
Priority:     0
Node:         worker-1/172.17.0.2
Start Time:   Mon, 01 Jan 2024 12:00:00 +0000
Labels:       app=nginx
Status:       Running
IP:           10.244.1.2
Containers:
  nginx:
    Container ID:   docker://abc123...
    Image:         nginx:1.14.2
    Port:          80/TCP
    Host Port:     0/TCP
    State:         Running
      Started:     Mon, 01 Jan 2024 12:00:05 +0000
    Ready:         True
    Restart Count: 0
    Environment:   <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-xyz (ro)`;
                } else if (command.includes('logs')) {
                    response = `2024/01/01 12:00:05 [notice] 1#1: start worker processes
2024/01/01 12:00:05 [notice] 1#1: nginx/1.14.2
2024/01/01 12:00:05 [notice] 1#1: built by gcc 8.3.0 (Debian 8.3.0-6)
2024/01/01 12:00:05 [notice] 1#1: OS: Linux 5.4.0-42-generic
2024/01/01 12:00:05 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576`;
                } else if (command.includes('top')) {
                    response = `NAME                     CPU(cores)   MEMORY(bytes)   
nginx-pod               10m          128Mi          
web-deployment-1234    25m          256Mi          
redis-master-1         15m          64Mi`;
                } else if (command.includes('etcdctl')) {
                    response = `{"level":"info","ts":"2024-01-01T12:00:05.123Z","caller":"etcdctl/command.go:89","msg":"Cluster status OK"}`;
                } else if (command.includes('systemctl status')) {
                    response = `● kubelet.service - kubelet: The Kubernetes Node Agent
     Loaded: loaded (/lib/systemd/system/kubelet.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2024-01-01 12:00:00 UTC; 5min ago
       Docs: https://kubernetes.io/docs/
   Main PID: 1234 (kubelet)
      Tasks: 27
     Memory: 128.0M
     CGroup: /system.slice/kubelet.service
             └─1234 /usr/bin/kubelet --config=/var/lib/kubelet/config.yaml`;
                } else {
                    response = `Command executed successfully. Check actual cluster for results.`;
                }
                
                output.innerHTML += `<div class="command-response">${response}</div>`;
                output.scrollTop = output.scrollHeight;
            }, 500);
        }

        // Handle command input
        function handleCommand(event) {
            if (event.key === 'Enter') {
                const command = event.target.value;
                simulateCommand(command);
                event.target.value = '';
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            showDetails('apiserver');
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
